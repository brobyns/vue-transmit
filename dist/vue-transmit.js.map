{"version":3,"file":"vue-transmit.js","sources":["../src/core/utils.ts","../src/classes/VTransmitFile.ts","../src/classes/VTransmitUploadContext.ts","../src/upload-drivers/axios.ts","../src/components/VueTransmit.vue","../src/upload-drivers/xhr.ts","../src/index.ts"],"sourcesContent":["import { VTransmitFile } from \"../classes/VTransmitFile\";\r\n\r\nexport function is_function(x: any): x is Function {\r\n\treturn typeof x == \"function\";\r\n}\r\n\r\nlet idCounter = 0;\r\nexport function uniqueId(prefix: string): string {\r\n\treturn prefix + ++idCounter;\r\n}\r\n\r\nexport function round(number: number, decimals: number = 2) {\r\n\tconst roundingFactor = Math.pow(10, decimals);\r\n\treturn Math.round(number * roundingFactor) / roundingFactor;\r\n}\r\n\r\nexport function fromBytesToKbit(bytes: number): number {\r\n\treturn bytes / 125;\r\n}\r\n\r\nexport function fromBytesToMbit(bytes: number): number {\r\n\treturn bytes / 125000;\r\n}\r\n\r\nexport function toKbps(bytes: number, seconds: number): number {\r\n\treturn fromBytesToKbit(bytes) / seconds;\r\n}\r\n\r\nexport function toMbps(bytes: number, seconds: number): number {\r\n\treturn fromBytesToMbit(bytes) / seconds;\r\n}\r\n\r\nexport function NewObject() {\r\n\treturn {};\r\n}\r\n\r\nexport function noop() {}\r\n\r\nexport function scaleH(ratio: number, width: number): number {\r\n\treturn width / ratio;\r\n}\r\n\r\nexport function scaleW(ratio: number, height: number): number {\r\n\treturn height * ratio;\r\n}\r\n\r\nexport function expectNever(_: never, msg: string): never {\r\n\tthrow new Error(msg);\r\n}\r\n\r\nexport enum UploadStatuses {\r\n\tNone = \"\",\r\n\tAdded = \"added\",\r\n\tQueued = \"queued\",\r\n\tAccepted = \"queued\",\r\n\tUploading = \"uploading\",\r\n\tCanceled = \"canceled\",\r\n\tError = \"error\",\r\n\tTimeout = \"timeout\",\r\n\tSuccess = \"success\",\r\n}\r\n\r\nexport enum ErrType {\r\n\tAny,\r\n\tTimeout,\r\n}\r\n\r\nexport enum VTransmitEvents {\r\n\tInitialize = \"initialize\",\r\n\tAddedFile = \"added-file\",\r\n\tAddedFiles = \"added-files\",\r\n\tRemovedFile = \"removed-file\",\r\n\tAcceptedFile = \"accepted-file\",\r\n\tRejectedFile = \"rejected-file\",\r\n\tAcceptComplete = \"accept-complete\",\r\n\tThumbnail = \"thumbnail\",\r\n\tProcessing = \"processing\",\r\n\tProcessingMultiple = \"processing-multiple\",\r\n\tCanceled = \"canceled\",\r\n\tCanceledMultiple = \"canceled-multiple\",\r\n\tSending = \"sending\",\r\n\tSendingMultiple = \"sending-multiple\",\r\n\tTimeout = \"timeout\",\r\n\tTimeoutMultiple = \"timeout-multiple\",\r\n\tUploadProgress = \"upload-progress\",\r\n\tTotalUploadProgress = \"total-upload-progress\",\r\n\tSuccess = \"success\",\r\n\tSuccessMultiple = \"success-multiple\",\r\n\tQueueComplete = \"queue-complete\",\r\n\tComplete = \"complete\",\r\n\tCompleteMultiple = \"complete-multiple\",\r\n\tError = \"error\",\r\n\tErrorMultiple = \"error-multiple\",\r\n\tMaxFilesReached = \"max-files-reached\",\r\n\tMaxFilesExceeded = \"max-files-exceeded\",\r\n\tReset = \"reset\",\r\n\tDragOver = \"drag-over\",\r\n\tDragEnter = \"drag-enter\",\r\n\tDragLeave = \"drag-leave\",\r\n\tDragEnd = \"drag-end\",\r\n\tDrop = \"drop\",\r\n\tPaste = \"paste\",\r\n}\r\n\r\n/**\r\n * @link https://developer.mozilla.org/en-US/docs/Web/API/CanvasRenderingContext2D/drawImage\r\n */\r\nexport interface DrawImageArgs {\r\n\tsx: number;\r\n\tsy: number;\r\n\tsWidth: number;\r\n\tsHeight: number;\r\n\tdx: number;\r\n\tdy: number;\r\n\tdWidth: number;\r\n\tdHeight: number;\r\n}\r\n\r\nexport interface Dimensions {\r\n\twidth: number;\r\n\theight: number;\r\n}\r\n\r\nexport function resizeImg(\r\n\tfile: VTransmitFile,\r\n\tdims: Dimensions\r\n): DrawImageArgs {\r\n\t// 's' variables are for source\r\n\t// 'd' variables are for destination\r\n\tconst sRatio = file.width / file.height;\r\n\tconst dRatio = dims.width / dims.height;\r\n\tconst coords: DrawImageArgs = {\r\n\t\tsx: 0,\r\n\t\tsy: 0,\r\n\t\tsWidth: file.width,\r\n\t\tsHeight: file.height,\r\n\t\tdx: 0,\r\n\t\tdy: 0,\r\n\t\tdWidth: dims.width,\r\n\t\tdHeight: dims.height,\r\n\t};\r\n\r\n\tlet w, h;\r\n\tif (dRatio > sRatio) {\r\n\t\tw = file.width;\r\n\t\th = scaleH(dRatio, file.width);\r\n\t} else {\r\n\t\tw = scaleW(dRatio, file.height);\r\n\t\th = file.height;\r\n\t}\r\n\r\n\tif (w < file.width) {\r\n\t\tcoords.sx = (file.width - w) / 2;\r\n\t\tcoords.sWidth = w;\r\n\t}\r\n\tif (h < file.height) {\r\n\t\tcoords.sy = (file.height - h) / 2;\r\n\t\tcoords.sHeight = h;\r\n\t}\r\n\r\n\treturn coords;\r\n}\r\n\r\nexport function webkitIsFile(\r\n\tentry: WebKitFileEntry | WebKitDirectoryEntry\r\n): entry is WebKitFileEntry {\r\n\treturn entry.isFile;\r\n}\r\n\r\nexport function webkitIsDir(\r\n\tentry: WebKitFileEntry | WebKitDirectoryEntry\r\n): entry is WebKitDirectoryEntry {\r\n\treturn entry.isDirectory;\r\n}\r\n","import { uniqueId, round, toKbps, toMbps } from \"../core/utils\";\r\nimport { UploadStatuses } from \"../core/utils\";\r\n\r\nexport interface UploadStats {\r\n\tbytesSent: number;\r\n\tprogress: number;\r\n\ttotal: number;\r\n\tspeed: SpeedStats;\r\n\tstart: number;\r\n\tend: number;\r\n\ttime: number;\r\n}\r\n\r\nexport interface SpeedStats {\r\n\tkbps: number;\r\n\tmbps: number;\r\n}\r\n\r\nexport class VTransmitFile {\r\n\tprivate _dataUrl: string = \"\";\r\n\t/**\r\n\t * The browser native file object obtained from the file input.\r\n\t */\r\n\tpublic nativeFile: File;\r\n\tpublic id: string = VTransmitFile.idFactory();\r\n\tpublic status: UploadStatuses = UploadStatuses.None;\r\n\tpublic accepted: boolean = false; // Passed all validation.\r\n\tpublic lastModified: number;\r\n\tpublic lastModifiedDate: Date;\r\n\tpublic name: string;\r\n\tpublic processing: boolean = false;\r\n\tpublic size: number;\r\n\tpublic type: string;\r\n\tpublic webkitRelativePath: USVString;\r\n\tpublic width: number = 0;\r\n\tpublic height: number = 0;\r\n\tpublic errorMessage: string = \"\";\r\n\tpublic thumbnailLoaded: boolean = false;\r\n\r\n\t/**\r\n\t * `adapterData` is data meant for use by an upload adapter only.\r\n\t */\r\n\tpublic driverData: AnyObject = {};\r\n\t/**\r\n\t * `meta` is a place to add custom properties.\r\n\t */\r\n\tpublic meta: AnyObject = {};\r\n\tpublic upload: UploadStats = {\r\n\t\tbytesSent: 0,\r\n\t\tprogress: 0,\r\n\t\ttotal: 0,\r\n\t\tspeed: {\r\n\t\t\tkbps: 0,\r\n\t\t\tmbps: 0,\r\n\t\t},\r\n\t\tstart: 0,\r\n\t\tend: 0,\r\n\t\ttime: 0,\r\n\t};\r\n\r\n\tconstructor(file: File) {\r\n\t\tthis.nativeFile = file;\r\n\t\tthis.lastModified = file.lastModified;\r\n\t\tthis.lastModifiedDate = file.lastModifiedDate;\r\n\t\tthis.name = file.name;\r\n\t\tthis.size = file.size;\r\n\t\tthis.type = file.type;\r\n\t\tthis.webkitRelativePath = file.webkitRelativePath;\r\n\t\tthis.upload.total = file.size;\r\n\t}\r\n\r\n\thandleProgress(e: ProgressEvent): void {\r\n\t\tthis.startProgress();\r\n\t\tconst total = e.total || this.upload.total;\r\n\t\tthis.upload.progress = Math.min(100, (100 * e.loaded) / total);\r\n\t\tthis.upload.bytesSent = e.loaded;\r\n\t\tthis.upload.total = total;\r\n\t\tthis.upload.time = (Date.now() - this.upload.start) / 1000;\r\n\t\t// Recalculate the upload speed in bytes/sec\r\n\t\tthis.upload.speed.kbps = round(\r\n\t\t\ttoKbps(this.upload.bytesSent, this.upload.time)\r\n\t\t);\r\n\t\tthis.upload.speed.mbps = round(\r\n\t\t\ttoMbps(this.upload.bytesSent, this.upload.time)\r\n\t\t);\r\n\t\tif (this.upload.progress === 100) {\r\n\t\t\tthis.endProgress();\r\n\t\t}\r\n\t}\r\n\r\n\tstartProgress(): VTransmitFile {\r\n\t\t// Avoid starting twice\r\n\t\tif (!this.upload.start) {\r\n\t\t\tthis.upload.start = Date.now();\r\n\t\t}\r\n\t\treturn this;\r\n\t}\r\n\r\n\tendProgress(): VTransmitFile {\r\n\t\t// Avoid ending twice\r\n\t\tif (!this.upload.end) {\r\n\t\t\tthis.upload.end = Date.now();\r\n\t\t\tthis.upload.time = (Date.now() - this.upload.start) / 1000;\r\n\t\t}\r\n\t\treturn this;\r\n\t}\r\n\r\n\tget dataUrl() {\r\n\t\treturn this.thumbnailLoaded ? this._dataUrl : \"\";\r\n\t}\r\n\r\n\tset dataUrl(value) {\r\n\t\t// Use non-enumerable data url to avoid copying around large data sets\r\n\t\tObject.defineProperty(this, \"_dataUrl\", {\r\n\t\t\tvalue,\r\n\t\t\tenumerable: false,\r\n\t\t\tconfigurable: true,\r\n\t\t\twritable: true,\r\n\t\t});\r\n\t\tthis.thumbnailLoaded = true;\r\n\t}\r\n\r\n\tstatic idFactory() {\r\n\t\treturn uniqueId(\"vt_\");\r\n\t}\r\n}\r\n","import VueTransmit from \"../components/VueTransmit.vue\";\r\nimport { VTransmitFile } from \"./VTransmitFile\";\r\nimport { UploadStatuses } from \"../core/utils\";\r\n\r\nexport class VTransmitUploadContext {\r\n\tpublic Statuses = UploadStatuses;\r\n\tpublic props: AnyObject;\r\n\r\n\tconstructor(public vtransmit: VueTransmit) {\r\n\t\tthis.props = vtransmit.$props;\r\n\t}\r\n\r\n\tpublic emit(event: string, ...args: any[]) {\r\n\t\tthis.vtransmit.$emit(event, ...args);\r\n\t}\r\n\r\n\tpublic get acceptedFiles(): VTransmitFile[] {\r\n\t\treturn (this.vtransmit as any).acceptedFiles;\r\n\t}\r\n\r\n\tpublic get rejectedFiles(): VTransmitFile[] {\r\n\t\treturn (this.vtransmit as any).rejectedFiles;\r\n\t}\r\n\r\n\tpublic get addedFiles(): VTransmitFile[] {\r\n\t\treturn (this.vtransmit as any).addedFiles;\r\n\t}\r\n\r\n\tpublic get queuedFiles(): VTransmitFile[] {\r\n\t\treturn (this.vtransmit as any).queuedFiles;\r\n\t}\r\n\r\n\tpublic get uploadingFiles(): VTransmitFile[] {\r\n\t\treturn (this.vtransmit as any).uploadingFiles;\r\n\t}\r\n\r\n\tpublic get activeFiles(): VTransmitFile[] {\r\n\t\treturn (this.vtransmit as any).activeFiles;\r\n\t}\r\n}\r\n","import { VTransmitFile } from \"../classes/VTransmitFile\";\r\nimport { VTransmitUploadContext } from \"../classes/VTransmitUploadContext\";\r\nimport { DriverInterface, UploadResult } from \"..\";\r\nimport { VTransmitEvents, ErrType, is_function } from \"../core/utils\";\r\n\r\nexport type ParamName = string | ((file: VTransmitFile) => string);\r\nexport type StaticOrDynamic<T> = T | ((files: VTransmitFile[]) => T);\r\n\r\nfunction resolveStaticOrDynamic<T>(\r\n\tx: StaticOrDynamic<T>,\r\n\tfiles: VTransmitFile[]\r\n): T {\r\n\tif (is_function(x)) {\r\n\t\treturn x(files);\r\n\t}\r\n\r\n\treturn x;\r\n}\r\n\r\nexport enum ParamNameStyle {\r\n\tEmpty,\r\n\tIndexed,\r\n\tBrackets,\r\n}\r\n\r\n/**\r\n * Responsibilities:\r\n * - send and manage upload via transport\r\n * - on progress: emit progress stats\r\n * - on error: emit to vue-transmit & update file status\r\n * - on timeout: emit to vue-transmit & update file status\r\n * - on error: emit to vue-transmit & update file status\r\n * - on success: emit to vue-transmit & update file status\r\n * - once complete: emit to vue-transmit & update file status\r\n */\r\nexport type AxiosDriverOptions<T = any> = {\r\n\t/**\r\n\t * A string representing the URL to send the request to\r\n\t * or a function called with an array of files for the upload\r\n\t * that returns a string url.\r\n\t */\r\n\turl: StaticOrDynamic<string>;\r\n\t/**\r\n\t * The HTTP method to use, such as \"GET\", \"POST\", \"PUT\", \"DELETE\", etc.\r\n\t * Ignored for non-HTTP(S) URLs.\r\n\t *\r\n\t * ```\r\n\t * // default => \"post\"\r\n\t * ```\r\n\t */\r\n\tmethod?: StaticOrDynamic<string>;\r\n\t/**\r\n\t * The XMLHttpRequest.withCredentials property is a Boolean that indicates\r\n\t * whether or not cross-site Access-Control requests should be made using\r\n\t * credentials such as cookies, authorization headers or TLS client\r\n\t * certificates. Setting withCredentials has no effect on same-site requests.\r\n\t */\r\n\twithCredentials?: StaticOrDynamic<boolean>;\r\n\t/**\r\n\t * The XMLHttpRequest.timeout property is an unsigned long representing the\r\n\t * number of milliseconds a request can take before automatically being\r\n\t * terminated. The default value is 0, which means there is no timeout.\r\n\t * Timeout shouldn't be used for synchronous XMLHttpRequests requests used in\r\n\t * a document environment or it will throw an InvalidAccessError exception.\r\n\t * When a timeout happens, a timeout event is fired.\r\n\t */\r\n\ttimeout?: StaticOrDynamic<number>;\r\n\t/**\r\n\t * The name of the file param that gets transferred.\r\n\t */\r\n\tparamName?: ParamName;\r\n\t/**\r\n\t * The param name syntax for multiple uploads.\r\n\t *\r\n\t * **Options:**\r\n\t * - `0 (Empty)` _(Default)_ Adds nothing to the paramName: `file`\r\n\t * - `1 (Indexed)` Adds the array index of the file: `file[0]`\r\n\t * - `2 (Brackets)` Adds the array-like brackets without index: `file[]`\r\n\t */\r\n\tmultipleParamNameStyle?: ParamNameStyle;\r\n\t/**\r\n\t * An object of additional parameters to transfer to the server.\r\n\t * This is the same as adding hidden input fields in the form element.\r\n\t */\r\n\tparams?: StaticOrDynamic<Dictionary<string>>;\r\n\theaders?: StaticOrDynamic<Dictionary<string>>;\r\n\t/**\r\n\t * The XMLHttpRequest.responseType property is an enumerated value that\r\n\t * returns the type of response. It also lets the author change the response\r\n\t * type. If an empty string is set as the value of responseType, the default\r\n\t * value text will be used.\r\n\t *\r\n\t * Setting the value of responseType to \"document\" is ignored if done in a\r\n\t * Worker environment. When setting responseType to a particular value,\r\n\t * the author should make sure that the server is actually sending a response\r\n\t * compatible to that format. If the server returns data that is not\r\n\t * compatible to the responseType that was set, the value of response will be\r\n\t * null. Also, setting responseType for synchronous requests will throw an\r\n\t * InvalidAccessError exception.\r\n\t */\r\n\tresponseType?: StaticOrDynamic<XMLHttpRequestResponseType>;\r\n\t/**\r\n\t * responseParseFunc is a function that given an XMLHttpRequest\r\n\t * returns a response object. Allows for custom response parsing.\r\n\t */\r\n\tresponseParseFunc?: (xhr: XMLHttpRequest) => T;\r\n\terrUploadError?: (xhr: XMLHttpRequest) => string;\r\n\terrUploadTimeout?: (xhr: XMLHttpRequest) => string;\r\n\trenameFile?: (name: string) => string;\r\n\thttp: any;\r\n};\r\n\r\nexport type XHRUploadGroup = {\r\n\tid: number;\r\n\tfiles: VTransmitFile[];\r\n\txhr: XMLHttpRequest;\r\n};\r\n\r\nlet group_id = 0;\r\n\r\nexport class AxiosDriver<T = any> implements DriverInterface {\r\n\tpublic context: VTransmitUploadContext;\r\n\tpublic url: StaticOrDynamic<string>;\r\n\tpublic method: StaticOrDynamic<string>;\r\n\tpublic withCredentials: StaticOrDynamic<boolean>;\r\n\tpublic timeout: StaticOrDynamic<number>;\r\n\tpublic paramName: ParamName;\r\n\tpublic multipleParamNameStyle: ParamNameStyle;\r\n\tpublic params: StaticOrDynamic<Dictionary<string>>;\r\n\tpublic headers: StaticOrDynamic<Dictionary<string>>;\r\n\tpublic responseType: StaticOrDynamic<XMLHttpRequestResponseType>;\r\n\tpublic errUploadError: (xhr: XMLHttpRequest) => string;\r\n\tpublic errUploadTimeout: (xhr: XMLHttpRequest) => string;\r\n\tpublic renameFile: (name: string) => string;\r\n\tpublic responseParseFunc?: (xhr: XMLHttpRequest) => T;\r\n\tpublic http: any;\r\n\r\n\tprivate uploadGroups: { [key: number]: XHRUploadGroup } = Object.create(\r\n\t\tnull\r\n\t);\r\n\r\n\tconstructor(\r\n\t\tcontext: VTransmitUploadContext,\r\n\t\toptions: AxiosDriverOptions<T>\r\n\t) {\r\n\t\tlet {\r\n\t\t\turl,\r\n\t\t\tmethod = \"post\",\r\n\t\t\twithCredentials = false,\r\n\t\t\ttimeout = 0,\r\n\t\t\tparamName = \"file\",\r\n\t\t\tmultipleParamNameStyle = ParamNameStyle.Empty,\r\n\t\t\tparams = Object.create(null),\r\n\t\t\theaders = {\r\n\t\t\t\tAccept: \"application/json\",\r\n\t\t\t\t\"Cache-Control\": \"no-cache\",\r\n\t\t\t\t\"X-Requested-With\": \"XMLHttpRequest\",\r\n\t\t\t},\r\n\t\t\tresponseType = \"json\",\r\n\t\t\tresponseParseFunc,\r\n\t\t\terrUploadError = (xhr: XMLHttpRequest) =>\r\n\t\t\t\t`Error during upload: ${xhr.statusText} [${xhr.status}]`,\r\n\t\t\terrUploadTimeout = (_xhr: XMLHttpRequest) =>\r\n\t\t\t\t`Error during upload: the server timed out.`,\r\n\t\t\trenameFile = (name: string) => name,\r\n\t\t\thttp,\r\n\t\t} = options;\r\n\r\n\t\tif (!url) {\r\n\t\t\tthrow new TypeError(\r\n\t\t\t\t`${\r\n\t\t\t\t\tthis.constructor.name\r\n\t\t\t\t} requires a 'url' parameter. Supply a string or a function returning a string.`\r\n\t\t\t);\r\n\t\t}\r\n\r\n\t\tthis.context = context;\r\n\t\tthis.url = url;\r\n\t\tthis.method = method;\r\n\t\tthis.withCredentials = withCredentials;\r\n\t\tthis.timeout = timeout;\r\n\t\tthis.paramName = paramName;\r\n\t\tthis.multipleParamNameStyle = multipleParamNameStyle;\r\n\t\tthis.params = params;\r\n\t\tthis.headers = headers;\r\n\t\tthis.responseType = responseType;\r\n\t\tthis.responseParseFunc = responseParseFunc;\r\n\t\tthis.errUploadError = errUploadError;\r\n\t\tthis.errUploadTimeout = errUploadTimeout;\r\n\t\tthis.renameFile = renameFile;\r\n\t\tthis.http = http;\r\n\t}\r\n\r\n\tuploadFiles(files: VTransmitFile[]): Promise<UploadResult<T>> {\r\n\t\treturn new Promise(resolve => {\r\n\t\t\tif (!this.url) {\r\n\t\t\t\treturn resolve({\r\n\t\t\t\t\tok: false,\r\n\t\t\t\t\terr: {\r\n\t\t\t\t\t\ttype: ErrType.Any,\r\n\t\t\t\t\t\tmessage: `Missing upload URL.`,\r\n\t\t\t\t\t\tdata: this.url,\r\n\t\t\t\t\t},\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\tconst xhr = new XMLHttpRequest();\r\n\t\t\tconst updateProgress = this.handleUploadProgress(files);\r\n\t\t\tconst id = group_id++;\r\n\t\t\tconst params = resolveStaticOrDynamic(this.params, files);\r\n\r\n\t\t\tthis.uploadGroups[id] = { id, xhr, files };\r\n\r\n\t\t\tfor (const file of files) {\r\n\t\t\t\tfile.driverData.groupID = id;\r\n\t\t\t\tfile.startProgress();\r\n\t\t\t}\r\n\r\n\t\t\tconst formData = new FormData();\r\n\t\t\tfor (const key of Object.keys(params)) {\r\n\t\t\t\tformData.append(key, params[key]);\r\n\t\t\t}\r\n\r\n\t\t\tfor (const file of files) {\r\n\t\t\t\tthis.context.emit(VTransmitEvents.Sending, file, xhr, formData);\r\n\t\t\t}\r\n\r\n\t\t\tif (this.context.props.uploadMultiple) {\r\n\t\t\t\tthis.context.emit(\r\n\t\t\t\t\tVTransmitEvents.SendingMultiple,\r\n\t\t\t\t\tfiles,\r\n\t\t\t\t\txhr,\r\n\t\t\t\t\tformData\r\n\t\t\t\t);\r\n\t\t\t}\r\n\r\n\t\t\tfor (let i = 0, len = files.length; i < len; i++) {\r\n\t\t\t\tformData.append(\r\n\t\t\t\t\tthis.getParamName(files[i], i),\r\n\t\t\t\t\tfiles[i].nativeFile,\r\n\t\t\t\t\tthis.renameFile(files[i].name)\r\n\t\t\t\t);\r\n\t\t\t}\r\n\r\n\t\t\tthis.http({\r\n\t\t\t\turl: this.url,\r\n\t\t\t\tmethod: this.method,\r\n\t\t\t\tdata: formData,\r\n\t\t\t\ttimeout: this.timeout,\r\n\t\t\t\twithCredentials: this.withCredentials,\r\n\t\t\t\tonUploadProgress: function(progressEvent?: ProgressEvent) {\r\n\t\t\t\t\tupdateProgress(progressEvent);\r\n\t\t\t\t},\r\n\t\t\t})\r\n\t\t\t\t.then((response: any) => {\r\n\t\t\t\t\treturn resolve({\r\n\t\t\t\t\t\tok: true,\r\n\t\t\t\t\t\tdata: response.data,\r\n\t\t\t\t\t});\r\n\t\t\t\t})\r\n\t\t\t\t.catch((error: any) => {\r\n\t\t\t\t\treturn resolve({\r\n\t\t\t\t\t\tok: false,\r\n\t\t\t\t\t\terr: {\r\n\t\t\t\t\t\t\ttype: ErrType.Any,\r\n\t\t\t\t\t\t\tmessage: error.response.data.message,\r\n\t\t\t\t\t\t\tdata: xhr,\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\t\t});\r\n\t}\r\n\r\n\thandleUploadProgress(files: VTransmitFile[]): (e?: ProgressEvent) => void {\r\n\t\tconst vm = this.context.vtransmit;\r\n\r\n\t\treturn function onProgressFn(e?: ProgressEvent): void {\r\n\t\t\tif (!e) {\r\n\t\t\t\tlet allFilesFinished = true;\r\n\r\n\t\t\t\tfor (const file of files) {\r\n\t\t\t\t\tif (\r\n\t\t\t\t\t\tfile.upload.progress !== 100 ||\r\n\t\t\t\t\t\tfile.upload.bytesSent !== file.upload.total\r\n\t\t\t\t\t) {\r\n\t\t\t\t\t\tallFilesFinished = false;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tfile.upload.progress = 100;\r\n\t\t\t\t\tfile.upload.bytesSent = file.upload.total;\r\n\t\t\t\t\tfile.endProgress();\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (allFilesFinished) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tfor (const file of files) {\r\n\t\t\t\tif (e) {\r\n\t\t\t\t\tfile.handleProgress(e);\r\n\t\t\t\t}\r\n\t\t\t\tvm.$emit(\r\n\t\t\t\t\tVTransmitEvents.UploadProgress,\r\n\t\t\t\t\tfile,\r\n\t\t\t\t\tfile.upload.progress,\r\n\t\t\t\t\tfile.upload.bytesSent\r\n\t\t\t\t);\r\n\t\t\t}\r\n\t\t};\r\n\t}\r\n\r\n\tgetParamName(file: VTransmitFile, index: string | number): string {\r\n\t\tlet paramName: string;\r\n\t\tif (is_function(this.paramName)) {\r\n\t\t\tparamName = this.paramName(file);\r\n\t\t} else {\r\n\t\t\tparamName = this.paramName;\r\n\t\t}\r\n\r\n\t\tif (!this.context.props.uploadMultiple) {\r\n\t\t\treturn paramName;\r\n\t\t}\r\n\r\n\t\tswitch (this.multipleParamNameStyle) {\r\n\t\t\tcase ParamNameStyle.Indexed:\r\n\t\t\t\tparamName += `[${index}]`;\r\n\t\t\t\tbreak;\r\n\t\t\tcase ParamNameStyle.Brackets:\r\n\t\t\t\tparamName += `[]`;\r\n\t\t\t\tbreak;\r\n\t\t\tcase ParamNameStyle.Empty:\r\n\t\t\tdefault:\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\r\n\t\treturn paramName;\r\n\t}\r\n\r\n\tcancelUpload(file: VTransmitFile): VTransmitFile[] {\r\n\t\tlet group = this.uploadGroups[file.driverData.groupID];\r\n\t\tif (!group) {\r\n\t\t\treturn [];\r\n\t\t}\r\n\r\n\t\tgroup.xhr.abort();\r\n\t\tthis.rmGroup(file.driverData.groupID);\r\n\r\n\t\treturn [...group.files];\r\n\t}\r\n\r\n\trmGroup(id: number) {\r\n\t\tdelete this.uploadGroups[id];\r\n\t}\r\n}\r\n","<template>\r\n   <component :is=\"tag\">\r\n      <slot v-if=\"filesSlotFirst\"\r\n            name=\"files\"\r\n            v-bind=\"fileSlotBindings\" />\r\n      <div class=\"v-transmit__upload-area\"\r\n           :class=\"[isDraggingClass, uploadAreaClasses]\"\r\n           :draggable=\"!disableDraggable\"\r\n           v-bind=\"uploadAreaAttrs\"\r\n           v-on=\"uploadAreaListeners\"\r\n           @click=\"handleClickUploaderAction\"\r\n           @dragstart=\"handleDragStart\"\r\n           @dragend=\"handleDragEnd\"\r\n           @dragenter.prevent.stop=\"handleDragEnter\"\r\n           @dragover.prevent.stop=\"handleDragOver\"\r\n           @dragleave=\"handleDragLeave\"\r\n           @drop.prevent.stop=\"handleDrop\">\r\n         <slot></slot>\r\n      </div>\r\n      <slot v-if=\"!filesSlotFirst\"\r\n            name=\"files\"\r\n            v-bind=\"fileSlotBindings\" />\r\n      <form :style=\"formStyles\"\r\n            ref=\"uploadForm\">\r\n         <input type=\"file\"\r\n                ref=\"hiddenFileInput\"\r\n                :multiple=\"multiple\"\r\n                :class=\"[maxFilesReachedClass]\"\r\n                :accept=\"filesToAccept\"\r\n                :capture=\"capture\"\r\n                @change=\"onFileInputChange\">\r\n      </form>\r\n   </component :is=\"tag\">\r\n</template>\r\n\r\n<style>\r\n.v-transmit__upload-area {\r\n\twidth: 100%;\r\n\tborder-radius: 1rem;\r\n\tborder: 2px dashed #bdbdbd;\r\n\tmin-height: 30vh;\r\n}\r\n\r\n@media (min-height: 1000px) {\r\n\t.v-transmit__upload-area {\r\n\t\tmin-height: 300px;\r\n\t}\r\n}\r\n\r\n.v-transmit__upload-area--is-dragging {\r\n\tbackground: #e1f5fe\r\n\t\tlinear-gradient(\r\n\t\t\t-45deg,\r\n\t\t\t#fafafa 25%,\r\n\t\t\ttransparent 25%,\r\n\t\t\ttransparent 50%,\r\n\t\t\t#fafafa 50%,\r\n\t\t\t#fafafa 75%,\r\n\t\t\ttransparent 75%,\r\n\t\t\ttransparent\r\n\t\t);\r\n\tbackground-size: 40px 40px;\r\n}\r\n</style>\r\n\r\n<script lang=\"ts\">\r\n// @ts-ignore\r\nimport Vue, { VueConstructor } from \"vue\";\r\nimport {\r\n\tNewObject,\r\n\tnoop,\r\n\tresizeImg,\r\n\twebkitIsFile,\r\n\twebkitIsDir,\r\n\tUploadStatuses,\r\n\tVTransmitEvents,\r\n\tround,\r\n\texpectNever,\r\n\tErrType,\r\n} from \"../core/utils\";\r\nimport { VTransmitFile } from \"../classes/VTransmitFile\";\r\nimport { VTransmitUploadContext } from \"../classes/VTransmitUploadContext\";\r\nimport { AxiosDriver } from \"../upload-drivers/axios\";\r\nimport { DriverInterface, DriverConstructor } from \"../core/interfaces\";\r\n\r\ntype FileSystemEntry = WebKitFileEntry | WebKitDirectoryEntry;\r\n\r\nexport default Vue.extend({\r\n\tname: \"VueTransmit\",\r\n\r\n\tprops: {\r\n\t\ttag: {\r\n\t\t\ttype: String,\r\n\t\t\tdefault: \"div\",\r\n\t\t},\r\n\t\tdisableDraggable: {\r\n\t\t\ttype: Boolean,\r\n\t\t\tdefault: false,\r\n\t\t},\r\n\t\tuploadAreaClasses: {\r\n\t\t\ttype: [Array, Object, String],\r\n\t\t\tdefault: null,\r\n\t\t},\r\n\t\tuploadAreaAttrs: {\r\n\t\t\ttype: Object,\r\n\t\t\tdefault: NewObject,\r\n\t\t},\r\n\t\tuploadAreaListeners: {\r\n\t\t\ttype: Object,\r\n\t\t\tdefault: NewObject,\r\n\t\t},\r\n\t\tdragClass: {\r\n\t\t\ttype: String,\r\n\t\t\tdefault: null,\r\n\t\t},\r\n\t\tfilesSlotFirst: {\r\n\t\t\ttype: Boolean,\r\n\t\t\tdefault: false,\r\n\t\t},\r\n\t\t/**\r\n\t\t * Sets the maximum number of uploads that can be running at a given time.\r\n\t\t */\r\n\t\tmaxConcurrentUploads: {\r\n\t\t\ttype: Number,\r\n\t\t\tdefault: 2,\r\n\t\t},\r\n\t\t/**\r\n\t\t * Whether to send multiple files in one request.\r\n\t\t */\r\n\t\tuploadMultiple: {\r\n\t\t\ttype: Boolean,\r\n\t\t\tdefault: false,\r\n\t\t},\r\n\t\t/**\r\n\t\t * Size in MB by default, or MiB if useBinarySizeBase == true\r\n\t\t */\r\n\t\tmaxFileSize: {\r\n\t\t\ttype: Number,\r\n\t\t\tdefault: 256,\r\n\t\t},\r\n\t\t/**\r\n\t\t * By default, a base 10 size is used. This corresponds to KB, MB, GB, etc.\r\n\t\t * If this property is true, a binary base will be used. This would\r\n\t\t * correspond to KiB, MiB, GiB.\r\n\t\t *\r\n\t\t * Base 10: `1000 ** x` where `x` equal 1(KB), 2(MB), 3(GB), etc.\r\n\t\t *\r\n\t\t * Base 2: `1 << x` where `x` equal 10(KiB), 20(MiB), 30(GiB), etc.\r\n\t\t */\r\n\t\tuseBinarySizeBase: {\r\n\t\t\ttype: Boolean,\r\n\t\t\tdefault: false,\r\n\t\t},\r\n\t\tcreateImageThumbnails: {\r\n\t\t\ttype: Boolean,\r\n\t\t\tdefault: true,\r\n\t\t},\r\n\t\t// in MB. When the filename exceeds this limit, the thumbnail will not be generated.\r\n\t\tmaxThumbnailFileSize: {\r\n\t\t\ttype: Number,\r\n\t\t\tdefault: 10,\r\n\t\t},\r\n\t\tthumbnailWidth: {\r\n\t\t\ttype: Number,\r\n\t\t\tdefault: 120,\r\n\t\t},\r\n\t\tthumbnailHeight: {\r\n\t\t\ttype: Number,\r\n\t\t\tdefault: 120,\r\n\t\t},\r\n\t\t/**\r\n\t\t * Can be used to limit the maximum number of files that will be handled\r\n\t\t * by this Dropzone\r\n\t\t */\r\n\t\tmaxFiles: {\r\n\t\t\ttype: Number,\r\n\t\t\tdefault: null,\r\n\t\t},\r\n\t\t/**\r\n\t\t * If true, the dropzone will present a file selector when clicked.\r\n\t\t */\r\n\t\tclickable: {\r\n\t\t\ttype: Boolean,\r\n\t\t\tdefault: true,\r\n\t\t},\r\n\t\t/**\r\n\t\t * Whether dot files in directories should be ignored.\r\n\t\t */\r\n\t\tignoreHiddenFiles: {\r\n\t\t\ttype: Boolean,\r\n\t\t\tdefault: true,\r\n\t\t},\r\n\t\t/**\r\n\t\t * You can set accepted mime types here.\r\n\t\t *\r\n\t\t * The default implementation of the `accept()` function will check this\r\n\t\t * property, and if the Dropzone is clickable this will be used as\r\n\t\t * `accept` attribute.\r\n\t\t *\r\n\t\t * This is a comma separated list of mime types or extensions. E.g.:\r\n\t\t * - audio/*,video/*,image/png,.pdf\r\n\t\t *\r\n\t\t * See https://developer.mozilla.org/en-US/docs/HTML/Element/input#attr-accept\r\n\t\t * for a reference.\r\n\t\t */\r\n\t\tacceptedFileTypes: {\r\n\t\t\ttype: Array,\r\n\t\t\tdefault() {\r\n\t\t\t\treturn [];\r\n\t\t\t},\r\n\t\t},\r\n\t\t/**\r\n\t\t * If false, files will be added to the queue but the queue will not be\r\n\t\t * processed automatically.\r\n\t\t * This can be useful if you need some additional user input before sending\r\n\t\t * files (or if you want want all files sent at once).\r\n\t\t * If you're ready to send the file simply call myDropzone.processQueue()\r\n\t\t */\r\n\t\tautoProcessQueue: {\r\n\t\t\ttype: Boolean,\r\n\t\t\tdefault: true,\r\n\t\t},\r\n\t\t/**\r\n\t\t * If false, files added to the dropzone will not be queued by default.\r\n\t\t * You'll have to call `enqueueFile(file)` manually.\r\n\t\t */\r\n\t\tautoQueue: {\r\n\t\t\ttype: Boolean,\r\n\t\t\tdefault: true,\r\n\t\t},\r\n\t\t/**\r\n\t\t * If null, no capture type will be specified\r\n\t\t * If camera, mobile devices will skip the file selection and choose camera\r\n\t\t * If microphone, mobile devices will skip the file selection and choose the microphone\r\n\t\t * If camcorder, mobile devices will skip the file selection and choose the camera in video mode\r\n\t\t * On apple devices multiple must be set to false.  AcceptedFiles may need to\r\n\t\t * be set to an appropriate mime type (e.g. \"image/*\", \"audio/*\", or \"video/*\").\r\n\t\t */\r\n\t\tcapture: {\r\n\t\t\ttype: String,\r\n\t\t\tdefault: null,\r\n\t\t},\r\n\t\t// If the file size is too big.\r\n\t\terrMaxFileSizeExceeded: {\r\n\t\t\ttype: Function,\r\n\t\t\tdefault(fileSize: number, maxFileSize: number, units: string) {\r\n\t\t\t\treturn {\r\n\t\t\t\t\tlabel: \"upload.filesize_too_big\",\r\n\t\t\t\t\tdata: {\r\n\t\t\t\t\t\tfileSize: round(fileSize, 1),\r\n\t\t\t\t\t\tmaxFileSize: round(maxFileSize, 1),\r\n\t\t\t\t\t},\r\n\t\t\t\t};\r\n\t\t\t},\r\n\t\t},\r\n\t\terrInvalidFileType: {\r\n\t\t\ttype: Function,\r\n\t\t\tdefault(type: string, _acceptedTypes: string[], _file: VTransmitFile) {\r\n\t\t\t\treturn {\r\n\t\t\t\t\tlabel: \"upload.invalid_file_type\",\r\n\t\t\t\t\tdata: {\r\n\t\t\t\t\t\tfileType: type,\r\n\t\t\t\t\t},\r\n\t\t\t\t};\r\n\t\t\t},\r\n\t\t},\r\n\t\terrMaxFilesExceeded: {\r\n\t\t\ttype: Function,\r\n\t\t\tdefault(maxFiles: number) {\r\n\t\t\t\treturn {\r\n\t\t\t\t\tlabel: \"upload.max_files_exceeded\",\r\n\t\t\t\t\tdata: {\r\n\t\t\t\t\t\tmaxFiles: maxFiles,\r\n\t\t\t\t\t},\r\n\t\t\t\t};\r\n\t\t\t},\r\n\t\t},\r\n\t\t/**\r\n\t\t * If `done()` is called without argument the file is accepted\r\n\t\t * If you call it with an error message, the file is rejected\r\n\t\t * (This allows for asynchronous validation).\r\n\t\t */\r\n\t\taccept: {\r\n\t\t\ttype: Function,\r\n\t\t\tdefault(_file: VTransmitFile, done: Function) {\r\n\t\t\t\tdone();\r\n\t\t\t},\r\n\t\t},\r\n\t\tresize: {\r\n\t\t\ttype: Function,\r\n\t\t\tdefault: resizeImg,\r\n\t\t},\r\n\t\tdriverOptions: {\r\n\t\t\ttype: Object,\r\n\t\t\tdefault: NewObject,\r\n\t\t},\r\n\t\tdriver: {\r\n\t\t\ttype: Function,\r\n\t\t\tdefault: AxiosDriver,\r\n\t\t},\r\n\t},\r\n\r\n\tmounted() {\r\n\t\tthis.$on(VTransmitEvents.UploadProgress, this.updateTotalUploadProgress);\r\n\t\tthis.$on(VTransmitEvents.RemovedFile, this.updateTotalUploadProgress);\r\n\t\tthis.$on(VTransmitEvents.Canceled, (file: VTransmitFile) =>\r\n\t\t\tthis.$emit(VTransmitEvents.Complete, file)\r\n\t\t);\r\n\t\tthis.$on(VTransmitEvents.Complete, (file: VTransmitFile) => {\r\n\t\t\tif (\r\n\t\t\t\tthis.addedFiles.length === 0 &&\r\n\t\t\t\tthis.uploadingFiles.length === 0 &&\r\n\t\t\t\tthis.queuedFiles.length === 0\r\n\t\t\t) {\r\n\t\t\t\tPromise.resolve().then(() =>\r\n\t\t\t\t\tthis.$emit(VTransmitEvents.QueueComplete, file)\r\n\t\t\t\t);\r\n\t\t\t}\r\n\t\t});\r\n\t\twindow.addEventListener(\"paste\", <any>this.handlePaste);\r\n\r\n\t\tthis.$emit(VTransmitEvents.Initialize, this);\r\n\t},\r\n\r\n\tbeforeDestroy() {\r\n\t\twindow.removeEventListener(\"paste\", <any>this.handlePaste);\r\n\t},\r\n\r\n\tdata(): {\r\n\t\tdragging: boolean;\r\n\t\tprocessingThumbnail: boolean;\r\n\t\tthumbnailQueue: VTransmitFile[];\r\n\t\tfiles: VTransmitFile[];\r\n\t\tdefaultHeaders: { [key: string]: string };\r\n\t\tformStyles: { [key: string]: string };\r\n\t} {\r\n\t\treturn {\r\n\t\t\tdragging: false,\r\n\t\t\t// Used to keep the createThumbnail calls processing async one-at-a-time\r\n\t\t\tprocessingThumbnail: false,\r\n\t\t\tthumbnailQueue: [],\r\n\t\t\tfiles: [],\r\n\t\t\tdefaultHeaders: {\r\n\t\t\t\tAccept: \"application/json\",\r\n\t\t\t\t\"Cache-Control\": \"no-cache\",\r\n\t\t\t\t\"X-Requested-With\": \"XMLHttpRequest\",\r\n\t\t\t},\r\n\t\t\tformStyles: {\r\n\t\t\t\tvisibility: \"hidden !important\",\r\n\t\t\t\tposition: \"absolute !important\",\r\n\t\t\t\ttop: \"0 !important\",\r\n\t\t\t\tleft: \"0 !important\",\r\n\t\t\t\theight: \"0px !important\",\r\n\t\t\t\twidth: \"0px !important\",\r\n\t\t\t},\r\n\t\t};\r\n\t},\r\n\r\n\tcomputed: {\r\n\t\tinputEl(): HTMLInputElement | null {\r\n\t\t\tlet el = this.$refs.hiddenFileInput;\r\n\t\t\tif (!(el instanceof HTMLInputElement)) {\r\n\t\t\t\treturn null;\r\n\t\t\t}\r\n\r\n\t\t\treturn el;\r\n\t\t},\r\n\t\tformEl(): HTMLFormElement | null {\r\n\t\t\tlet el = this.$refs.uploadForm;\r\n\t\t\tif (!(el instanceof HTMLFormElement)) {\r\n\t\t\t\treturn null;\r\n\t\t\t}\r\n\r\n\t\t\treturn el;\r\n\t\t},\r\n\t\tfileSizeBase(): number {\r\n\t\t\tif (this.useBinarySizeBase) {\r\n\t\t\t\treturn 1024;\r\n\t\t\t}\r\n\r\n\t\t\treturn 1000;\r\n\t\t},\r\n\t\tmaxFileSizeBytes(): number {\r\n\t\t\treturn this.maxFileSize * this.fileSizeBase * this.fileSizeBase;\r\n\t\t},\r\n\t\tfilesToAccept(): string {\r\n\t\t\treturn this.acceptedFileTypes.join(\",\");\r\n\t\t},\r\n\t\tmultiple(): boolean {\r\n\t\t\treturn this.maxFiles === null || this.maxFiles > 1;\r\n\t\t},\r\n\t\taddedFiles(): VTransmitFile[] {\r\n\t\t\treturn this.getFilesWithStatus(UploadStatuses.Added);\r\n\t\t},\r\n\t\tqueuedFiles(): VTransmitFile[] {\r\n\t\t\treturn this.getFilesWithStatus(UploadStatuses.Queued);\r\n\t\t},\r\n\t\tacceptedFiles(): VTransmitFile[] {\r\n\t\t\treturn this.files.filter(f => f.accepted);\r\n\t\t},\r\n\t\trejectedFiles(): VTransmitFile[] {\r\n\t\t\treturn this.files.filter(f => !f.accepted);\r\n\t\t},\r\n\t\tuploadingFiles(): VTransmitFile[] {\r\n\t\t\treturn this.getFilesWithStatus(UploadStatuses.Uploading);\r\n\t\t},\r\n\t\tcanceledFiles(): VTransmitFile[] {\r\n\t\t\treturn this.getFilesWithStatus(UploadStatuses.Canceled);\r\n\t\t},\r\n\t\tfailedFiles(): VTransmitFile[] {\r\n\t\t\treturn this.getFilesWithStatus(UploadStatuses.Error);\r\n\t\t},\r\n\t\ttimeoutFiles(): VTransmitFile[] {\r\n\t\t\treturn this.getFilesWithStatus(UploadStatuses.Timeout);\r\n\t\t},\r\n\t\tsuccessfulFiles(): VTransmitFile[] {\r\n\t\t\treturn this.getFilesWithStatus(UploadStatuses.Success);\r\n\t\t},\r\n\t\tactiveFiles(): VTransmitFile[] {\r\n\t\t\treturn this.getFilesWithStatus(\r\n\t\t\t\tUploadStatuses.Uploading,\r\n\t\t\t\tUploadStatuses.Queued\r\n\t\t\t);\r\n\t\t},\r\n\t\tmaxFilesReached(): boolean {\r\n\t\t\treturn (\r\n\t\t\t\tthis.maxFiles != null && this.acceptedFiles.length >= this.maxFiles\r\n\t\t\t);\r\n\t\t},\r\n\t\tmaxFilesReachedClass(): string | null {\r\n\t\t\treturn this.maxFilesReached ? \"v-transmit__max-files--reached\" : null;\r\n\t\t},\r\n\t\tisDraggingClass(): Dictionary<boolean> {\r\n\t\t\treturn {\r\n\t\t\t\t\"v-transmit__upload-area--is-dragging\": this.dragging,\r\n\t\t\t\t[this.dragClass]: this.dragging,\r\n\t\t\t};\r\n\t\t},\r\n\t\tisUploading(): boolean {\r\n\t\t\treturn this.uploadingFiles.length > 0;\r\n\t\t},\r\n\t\tfileSlotBindings(): {\r\n\t\t\tfiles: VTransmitFile[];\r\n\t\t\tacceptedFiles: VTransmitFile[];\r\n\t\t\trejectedFiles: VTransmitFile[];\r\n\t\t\taddedFiles: VTransmitFile[];\r\n\t\t\tqueuedFiles: VTransmitFile[];\r\n\t\t\tuploadingFiles: VTransmitFile[];\r\n\t\t\tcanceledFiles: VTransmitFile[];\r\n\t\t\tfailedFiles: VTransmitFile[];\r\n\t\t\ttimeoutFiles: VTransmitFile[];\r\n\t\t\tsuccessfulFiles: VTransmitFile[];\r\n\t\t\tactiveFiles: VTransmitFile[];\r\n\t\t\tisUploading: boolean;\r\n\t\t} {\r\n\t\t\treturn {\r\n\t\t\t\tfiles: this.files,\r\n\t\t\t\tacceptedFiles: this.acceptedFiles,\r\n\t\t\t\trejectedFiles: this.rejectedFiles,\r\n\t\t\t\taddedFiles: this.addedFiles,\r\n\t\t\t\tqueuedFiles: this.queuedFiles,\r\n\t\t\t\tuploadingFiles: this.uploadingFiles,\r\n\t\t\t\tcanceledFiles: this.canceledFiles,\r\n\t\t\t\tfailedFiles: this.failedFiles,\r\n\t\t\t\ttimeoutFiles: this.timeoutFiles,\r\n\t\t\t\tsuccessfulFiles: this.successfulFiles,\r\n\t\t\t\tactiveFiles: this.activeFiles,\r\n\t\t\t\tisUploading: this.isUploading,\r\n\t\t\t};\r\n\t\t},\r\n\t\ttransport(): DriverInterface {\r\n\t\t\tlet Driver: DriverConstructor = <any>this.driver;\r\n\t\t\ttry {\r\n\t\t\t\treturn new Driver(\r\n\t\t\t\t\tnew VTransmitUploadContext(this),\r\n\t\t\t\t\tthis.driverOptions\r\n\t\t\t\t);\r\n\t\t\t} catch (err) {\r\n\t\t\t\tconsole.error(`[vue-transmit] Error resolving upload driver:`, err);\r\n\t\t\t\tthrow err;\r\n\t\t\t}\r\n\t\t},\r\n\t},\r\n\r\n\twatch: {\r\n\t\tacceptedFiles(acceptedFiles: VTransmitFile[]) {\r\n\t\t\tif (this.maxFiles == null) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tif (acceptedFiles.length >= this.maxFiles) {\r\n\t\t\t\tthis.$emit(VTransmitEvents.MaxFilesReached, this.files);\r\n\t\t\t}\r\n\t\t},\r\n\t},\r\n\r\n\tmethods: {\r\n\t\tgetFilesWithStatus(...statuses: UploadStatuses[]): VTransmitFile[] {\r\n\t\t\treturn this.files.filter(f => statuses.indexOf(f.status) > -1);\r\n\t\t},\r\n\t\tonFileInputChange(): void {\r\n\t\t\tlet { inputEl, formEl } = this;\r\n\t\t\tif (inputEl == null || formEl == null) {\r\n\t\t\t\t// This is unreachable code,\r\n\t\t\t\t// but we need to let TS know it.\r\n\t\t\t\tthrow TypeError();\r\n\t\t\t}\r\n\r\n\t\t\t// Can be null\r\n\t\t\tif (!inputEl.files) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tthis.$emit(\r\n\t\t\t\tVTransmitEvents.AddedFiles,\r\n\t\t\t\tArray.from(inputEl.files).map(this.addFile)\r\n\t\t\t);\r\n\r\n\t\t\t// Reset input element's files\r\n\t\t\t// https://github.com/alexsasharegan/vue-transmit/issues/25\r\n\t\t\tformEl.reset();\r\n\t\t},\r\n\t\taddFile(file: File): VTransmitFile {\r\n\t\t\tconst vtFile = new VTransmitFile(file);\r\n\t\t\tvtFile.status = UploadStatuses.Added;\r\n\t\t\tthis.files.push(vtFile);\r\n\t\t\tthis.$emit(VTransmitEvents.AddedFile, vtFile);\r\n\t\t\tthis.enqueueThumbnail(vtFile);\r\n\t\t\tthis.acceptFile(vtFile, (error?: string) => {\r\n\t\t\t\tif (error) {\r\n\t\t\t\t\tvtFile.accepted = false;\r\n\t\t\t\t\tthis.errorProcessing([vtFile], error);\r\n\t\t\t\t\tthis.$emit(VTransmitEvents.RejectedFile, vtFile);\r\n\t\t\t\t\tthis.$emit(VTransmitEvents.AcceptComplete, vtFile);\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvtFile.accepted = true;\r\n\t\t\t\tthis.$emit(VTransmitEvents.AcceptedFile, vtFile);\r\n\t\t\t\tthis.$emit(VTransmitEvents.AcceptComplete, vtFile);\r\n\t\t\t\tif (this.autoQueue) {\r\n\t\t\t\t\tthis.enqueueFile(vtFile);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\treturn vtFile;\r\n\t\t},\r\n\t\tacceptFile(file: VTransmitFile, done: (err?: string) => void): void {\r\n\t\t\t// File size check\r\n\t\t\tif (file.size > this.maxFileSizeBytes) {\r\n\t\t\t\t// size is in bytes, base is kilo multiplier, so base * base == mega\r\n\t\t\t\tlet mega = this.fileSizeBase * this.fileSizeBase;\r\n\t\t\t\tlet fileSize = file.size / mega;\r\n\t\t\t\tlet units = \"MB\";\r\n\t\t\t\tif (this.useBinarySizeBase) {\r\n\t\t\t\t\tunits = \"MiB\";\r\n\t\t\t\t}\r\n\t\t\t\treturn done(\r\n\t\t\t\t\tthis.errMaxFileSizeExceeded(fileSize, this.maxFileSize, units)\r\n\t\t\t\t);\r\n\t\t\t}\r\n\r\n\t\t\t// File type check\r\n\t\t\tif (!this.isValidFileType(file, this.acceptedFileTypes)) {\r\n\t\t\t\treturn done(\r\n\t\t\t\t\tthis.errInvalidFileType(file.type, this.acceptedFileTypes, file)\r\n\t\t\t\t);\r\n\t\t\t}\r\n\r\n\t\t\t// Upload limit check\r\n\t\t\tif (\r\n\t\t\t\tthis.maxFiles != null &&\r\n\t\t\t\tthis.acceptedFiles.length >= this.maxFiles\r\n\t\t\t) {\r\n\t\t\t\tthis.$emit(VTransmitEvents.MaxFilesExceeded, file);\r\n\t\t\t\treturn done(this.errMaxFilesExceeded(this.maxFiles));\r\n\t\t\t}\r\n\r\n\t\t\t// Happy path 😀\r\n\t\t\tthis.accept(file, done);\r\n\t\t},\r\n\t\tremoveFile(file: VTransmitFile): void {\r\n\t\t\tif (file.status === UploadStatuses.Uploading) {\r\n\t\t\t\tthis.cancelUpload(file);\r\n\t\t\t}\r\n\t\t\tconst idxToRm = this.files.findIndex(f => f.id === file.id);\r\n\t\t\tif (idxToRm > -1) {\r\n\t\t\t\tthis.$emit(\r\n\t\t\t\t\tVTransmitEvents.RemovedFile,\r\n\t\t\t\t\tthis.files.splice(idxToRm, 1)[0]\r\n\t\t\t\t);\r\n\t\t\t\tif (this.files.length === 0) {\r\n\t\t\t\t\tthis.$emit(VTransmitEvents.Reset);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\tremoveFilesWithStatus(...statuses: UploadStatuses[]): void {\r\n\t\t\tthis.getFilesWithStatus(...statuses).map(this.removeFile);\r\n\t\t},\r\n\t\tremoveAllFiles(cancelInProgressUploads = false): void {\r\n\t\t\tthis.files\r\n\t\t\t\t.filter(\r\n\t\t\t\t\tf =>\r\n\t\t\t\t\t\tf.status !== UploadStatuses.Uploading ||\r\n\t\t\t\t\t\tcancelInProgressUploads\r\n\t\t\t\t)\r\n\t\t\t\t.map(this.removeFile);\r\n\t\t},\r\n\t\ttriggerBrowseFiles(): void {\r\n\t\t\tif (this.inputEl) {\r\n\t\t\t\tthis.inputEl.click();\r\n\t\t\t}\r\n\t\t},\r\n\t\thandleClickUploaderAction(): void {\r\n\t\t\tif (this.clickable) {\r\n\t\t\t\tthis.triggerBrowseFiles();\r\n\t\t\t}\r\n\t\t},\r\n\t\tenqueueFile(file: VTransmitFile): void {\r\n\t\t\tif (file.status !== UploadStatuses.Added || file.accepted !== true) {\r\n\t\t\t\tthrow new Error(\r\n\t\t\t\t\t\"This file can't be queued because it has already been processed or was rejected.\"\r\n\t\t\t\t);\r\n\t\t\t}\r\n\r\n\t\t\tfile.status = UploadStatuses.Queued;\r\n\t\t\tif (this.autoProcessQueue) {\r\n\t\t\t\tPromise.resolve().then(this.processQueue);\r\n\t\t\t}\r\n\t\t},\r\n\t\tenqueueThumbnail(file: VTransmitFile): void {\r\n\t\t\tif (\r\n\t\t\t\t!this.createImageThumbnails ||\r\n\t\t\t\t!file.type.match(/image.*/) ||\r\n\t\t\t\tfile.size > this.maxThumbnailFileSize * 1024 * 1024\r\n\t\t\t) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tthis.thumbnailQueue.push(file);\r\n\t\t\tPromise.resolve().then(this.processThumbnailQueue);\r\n\t\t},\r\n\t\tprocessThumbnailQueue(): void {\r\n\t\t\tlet file: VTransmitFile | undefined;\r\n\r\n\t\t\t// Employ a chain of self-calling, self-queuing createThumbnail calls\r\n\t\t\t// so execution can stay as non-blocking as possible.\r\n\t\t\tif (this.processingThumbnail || this.thumbnailQueue.length === 0) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tthis.processingThumbnail = true;\r\n\t\t\tif ((file = this.thumbnailQueue.shift())) {\r\n\t\t\t\tthis.createThumbnail(file, () => {\r\n\t\t\t\t\tthis.processingThumbnail = false;\r\n\t\t\t\t\tthis.processThumbnailQueue();\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t},\r\n\t\tcreateThumbnail(file: VTransmitFile, callback = noop): void {\r\n\t\t\tconst reader = new FileReader();\r\n\t\t\treader.addEventListener(\r\n\t\t\t\t\"load\",\r\n\t\t\t\t() => {\r\n\t\t\t\t\tif (file.type === \"image/svg+xml\") {\r\n\t\t\t\t\t\tfile.dataUrl = reader.result;\r\n\t\t\t\t\t\tthis.$emit(VTransmitEvents.Thumbnail, file, reader.result);\r\n\t\t\t\t\t\tcallback();\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.createThumbnailFromUrl(file, reader.result, callback);\r\n\t\t\t\t},\r\n\t\t\t\tfalse\r\n\t\t\t);\r\n\r\n\t\t\t// FileReader requires a native File|Blob object\r\n\t\t\treader.readAsDataURL(file.nativeFile);\r\n\t\t},\r\n\t\tcreateThumbnailFromUrl(\r\n\t\t\tfile: VTransmitFile,\r\n\t\t\timageUrl: string,\r\n\t\t\tcallback?: Function\r\n\t\t): void {\r\n\t\t\tconst imgEl = document.createElement(\"img\");\r\n\r\n\t\t\timgEl.addEventListener(\r\n\t\t\t\t\"load\",\r\n\t\t\t\t() => {\r\n\t\t\t\t\tlet ctx: CanvasRenderingContext2D | null;\r\n\t\t\t\t\tfile.width = imgEl.width;\r\n\t\t\t\t\tfile.height = imgEl.height;\r\n\t\t\t\t\tconst resizeInfo = this.resize(file, {\r\n\t\t\t\t\t\twidth: this.thumbnailWidth,\r\n\t\t\t\t\t\theight: this.thumbnailHeight,\r\n\t\t\t\t\t});\r\n\t\t\t\t\tconst canvas = document.createElement(\"canvas\");\r\n\t\t\t\t\t// Can be null\r\n\t\t\t\t\tif (!(ctx = canvas.getContext(\"2d\"))) {\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tcanvas.width = resizeInfo.dWidth;\r\n\t\t\t\t\tcanvas.height = resizeInfo.dHeight;\r\n\t\t\t\t\tctx.drawImage(\r\n\t\t\t\t\t\timgEl,\r\n\t\t\t\t\t\tresizeInfo.sx,\r\n\t\t\t\t\t\tresizeInfo.sy,\r\n\t\t\t\t\t\tresizeInfo.sWidth,\r\n\t\t\t\t\t\tresizeInfo.sHeight,\r\n\t\t\t\t\t\tresizeInfo.dx,\r\n\t\t\t\t\t\tresizeInfo.dy,\r\n\t\t\t\t\t\tresizeInfo.dWidth,\r\n\t\t\t\t\t\tresizeInfo.dHeight\r\n\t\t\t\t\t);\r\n\t\t\t\t\tconst thumbnail = canvas.toDataURL(\"image/png\");\r\n\t\t\t\t\tfile.dataUrl = thumbnail;\r\n\t\t\t\t\tthis.$emit(VTransmitEvents.Thumbnail, file, thumbnail);\r\n\r\n\t\t\t\t\tif (callback) {\r\n\t\t\t\t\t  canvas.toBlob(blob => callback(blob))\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\tfalse\r\n\t\t\t);\r\n\t\t\tif (callback) {\r\n\t\t\t\timgEl.addEventListener(\r\n\t\t\t\t\t\"error\",\r\n\t\t\t\t\tcallback as EventListenerOrEventListenerObject,\r\n\t\t\t\t\tfalse\r\n\t\t\t\t);\r\n\t\t\t}\r\n\r\n\t\t\timgEl.src = imageUrl;\r\n\t\t},\r\n\t\tprocessQueue(): void {\r\n\t\t\tconst len_uploading = this.uploadingFiles.length;\r\n\t\t\tif (\r\n\t\t\t\tlen_uploading >= this.maxConcurrentUploads ||\r\n\t\t\t\tthis.queuedFiles.length === 0\r\n\t\t\t) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tif (this.uploadMultiple) {\r\n\t\t\t\treturn this.processFiles(\r\n\t\t\t\t\tthis.queuedFiles.slice(\r\n\t\t\t\t\t\t0,\r\n\t\t\t\t\t\tthis.maxConcurrentUploads - len_uploading\r\n\t\t\t\t\t)\r\n\t\t\t\t);\r\n\t\t\t}\r\n\r\n\t\t\tlet i = len_uploading;\r\n\t\t\tlet file: VTransmitFile | undefined;\r\n\t\t\tfor (; i < this.maxConcurrentUploads; i++) {\r\n\t\t\t\tif ((file = this.queuedFiles.shift())) {\r\n\t\t\t\t\tthis.processFile(file);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\tprocessFile(file: VTransmitFile): void {\r\n\t\t\tthis.processFiles([file]);\r\n\t\t},\r\n\t\tprocessFiles(files: VTransmitFile[]): void {\r\n\t\t\tlet file: VTransmitFile;\r\n\t\t\tfor (file of files) {\r\n\t\t\t\tfile.processing = true;\r\n\t\t\t\tfile.status = UploadStatuses.Uploading;\r\n\t\t\t\tthis.$emit(VTransmitEvents.Processing, file);\r\n\t\t\t}\r\n\t\t\tif (this.uploadMultiple) {\r\n\t\t\t\tthis.$emit(VTransmitEvents.ProcessingMultiple, files);\r\n\t\t\t}\r\n\r\n\t\t\treturn this.uploadFiles(files);\r\n\t\t},\r\n\t\tcancelUpload(file: VTransmitFile): void {\r\n\t\t\t// Cancel a file before uploading\r\n\t\t\tif (\r\n\t\t\t\tfile.status === UploadStatuses.Added ||\r\n\t\t\t\tfile.status === UploadStatuses.Queued\r\n\t\t\t) {\r\n\t\t\t\tfile.status = UploadStatuses.Canceled;\r\n\t\t\t\tthis.$emit(VTransmitEvents.Canceled, file);\r\n\t\t\t\tif (this.uploadMultiple) {\r\n\t\t\t\t\tthis.$emit(VTransmitEvents.CanceledMultiple, [file]);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t// Cancel an in-progress upload\r\n\t\t\tif (file.status === UploadStatuses.Uploading) {\r\n\t\t\t\tlet canceledFiles = this.transport.cancelUpload(file);\r\n\t\t\t\tlet f: VTransmitFile;\r\n\t\t\t\tfor (f of canceledFiles) {\r\n\t\t\t\t\tf.status = UploadStatuses.Canceled;\r\n\t\t\t\t\tthis.$emit(VTransmitEvents.Canceled, f);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (this.uploadMultiple) {\r\n\t\t\t\t\tthis.$emit(VTransmitEvents.CanceledMultiple, canceledFiles);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif (this.autoProcessQueue) {\r\n\t\t\t\tthis.processQueue();\r\n\t\t\t}\r\n\t\t},\r\n\t\tuploadFile(file: VTransmitFile): void {\r\n\t\t\tthis.uploadFiles([file]);\r\n\t\t},\r\n\t\tuploadFiles(files: VTransmitFile[]): void {\r\n\t\t\tthis.transport.uploadFiles(files).then(result => {\r\n\t\t\t\tif (result.ok) {\r\n\t\t\t\t\treturn this.uploadFinished(files, result.data);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tswitch (result.err.type) {\r\n\t\t\t\t\tcase ErrType.Any:\r\n\t\t\t\t\t\tthis.errorProcessing(\r\n\t\t\t\t\t\t\tfiles,\r\n\t\t\t\t\t\t\tresult.err.message,\r\n\t\t\t\t\t\t\tresult.err.data\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase ErrType.Timeout:\r\n\t\t\t\t\t\tthis.handleTimeout(\r\n\t\t\t\t\t\t\tfiles,\r\n\t\t\t\t\t\t\tresult.err.message,\r\n\t\t\t\t\t\t\tresult.err.data\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tdefault:\r\n\t\t\t\t\t\texpectNever(result.err.type, \"unmatched error case\");\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t},\r\n\t\thandleTimeout(files: VTransmitFile[], message: string, data: any): void {\r\n\t\t\tlet f: VTransmitFile;\r\n\t\t\tfor (f of files) {\r\n\t\t\t\tf.status = UploadStatuses.Timeout;\r\n\t\t\t\tf.endProgress();\r\n\t\t\t\tthis.$emit(VTransmitEvents.Timeout, f, message, data);\r\n\t\t\t}\r\n\t\t\tthis.$emit(VTransmitEvents.TimeoutMultiple, files, message, data);\r\n\r\n\t\t\tif (this.autoProcessQueue) {\r\n\t\t\t\tthis.processQueue();\r\n\t\t\t}\r\n\t\t},\r\n\t\tupdateTotalUploadProgress(): void {\r\n\t\t\tconst progress = this.activeFiles.reduce(\r\n\t\t\t\t(memo, file) => {\r\n\t\t\t\t\tmemo.totalBytesSent += file.upload.bytesSent;\r\n\t\t\t\t\tmemo.totalBytes += file.upload.total;\r\n\t\t\t\t\treturn memo;\r\n\t\t\t\t},\r\n\t\t\t\t{ totalBytesSent: 0, totalBytes: 0, totalProgress: 100 }\r\n\t\t\t);\r\n\r\n\t\t\tif (this.activeFiles.length) {\r\n\t\t\t\tprogress.totalProgress =\r\n\t\t\t\t\t(100 * progress.totalBytesSent) / progress.totalBytes;\r\n\t\t\t}\r\n\r\n\t\t\tthis.$emit(VTransmitEvents.TotalUploadProgress, progress);\r\n\t\t},\r\n\t\tuploadFinished(\r\n\t\t\tfiles: VTransmitFile[],\r\n\t\t\tresponse: string | object | any[],\r\n\t\t\t...args: any[]\r\n\t\t): void {\r\n\t\t\tfor (const file of files) {\r\n\t\t\t\tfile.status = UploadStatuses.Success;\r\n\t\t\t\tfile.endProgress();\r\n\t\t\t\tthis.$emit(VTransmitEvents.Success, file, response, ...args);\r\n\t\t\t\tthis.$emit(VTransmitEvents.Complete, file);\r\n\t\t\t}\r\n\r\n\t\t\tif (this.uploadMultiple) {\r\n\t\t\t\tthis.$emit(\r\n\t\t\t\t\tVTransmitEvents.SuccessMultiple,\r\n\t\t\t\t\tfiles,\r\n\t\t\t\t\tresponse,\r\n\t\t\t\t\t...args\r\n\t\t\t\t);\r\n\t\t\t\tthis.$emit(VTransmitEvents.CompleteMultiple, files);\r\n\t\t\t}\r\n\r\n\t\t\tif (this.autoProcessQueue) {\r\n\t\t\t\tthis.processQueue();\r\n\t\t\t}\r\n\t\t},\r\n\t\terrorProcessing(files: VTransmitFile[], message: string, data?: any) {\r\n\t\t\tfor (const file of files) {\r\n\t\t\t\tfile.status = UploadStatuses.Error;\r\n\t\t\t\tfile.errorMessage = message;\r\n\t\t\t\tfile.endProgress();\r\n\t\t\t\tthis.$emit(VTransmitEvents.Error, file, message, data);\r\n\t\t\t\tthis.$emit(VTransmitEvents.Complete, file);\r\n\t\t\t}\r\n\r\n\t\t\tif (this.uploadMultiple) {\r\n\t\t\t\tthis.$emit(VTransmitEvents.ErrorMultiple, files, message, data);\r\n\t\t\t\tthis.$emit(VTransmitEvents.CompleteMultiple, files);\r\n\t\t\t}\r\n\r\n\t\t\tif (this.autoProcessQueue) {\r\n\t\t\t\treturn this.processQueue();\r\n\t\t\t}\r\n\t\t},\r\n\t\tisValidFileType(\r\n\t\t\tfile: VTransmitFile,\r\n\t\t\tacceptedFileTypes: string[]\r\n\t\t): boolean {\r\n\t\t\tif (!acceptedFileTypes.length) {\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t\tconst mime_type = file.type;\r\n\t\t\tconst base_type = mime_type.slice(0, mime_type.indexOf(\"/\"));\r\n\t\t\tlet valid_type: string;\r\n\t\t\t// Return true on the first condition match,\r\n\t\t\t// otherwise exhaust all conditions and return false.\r\n\t\t\tfor (valid_type of acceptedFileTypes) {\r\n\t\t\t\tswitch (true) {\r\n\t\t\t\t\t// Handle extension validation\r\n\t\t\t\t\tcase valid_type.charAt(0) == \".\":\r\n\t\t\t\t\t\t// Ensure extension exists at the end of the filename.\r\n\t\t\t\t\t\tif (\r\n\t\t\t\t\t\t\tfile.name\r\n\t\t\t\t\t\t\t\t.toLowerCase()\r\n\t\t\t\t\t\t\t\t.indexOf(\r\n\t\t\t\t\t\t\t\t\tvalid_type.toLowerCase(),\r\n\t\t\t\t\t\t\t\t\tfile.name.length - valid_type.length\r\n\t\t\t\t\t\t\t\t) !== -1\r\n\t\t\t\t\t\t) {\r\n\t\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t// Handle globs (\"image/*\")\r\n\t\t\t\t\tcase valid_type.slice(-2) == \"/*\":\r\n\t\t\t\t\t\tif (base_type === valid_type.slice(0, -2)) {\r\n\t\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t// Match mimetype exact\r\n\t\t\t\t\tdefault:\r\n\t\t\t\t\t\tif (mime_type == valid_type) {\r\n\t\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\treturn false;\r\n\t\t},\r\n\t\thandleDragStart(e: DragEvent): void {\r\n\t\t\tthis.$emit(\"drag-start\", e);\r\n\t\t},\r\n\t\thandleDragOver(e: DragEvent): void {\r\n\t\t\tthis.dragging = true;\r\n\t\t\tlet effect;\r\n\t\t\ttry {\r\n\t\t\t\t// Handle browser bug\r\n\t\t\t\teffect = e.dataTransfer.effectAllowed;\r\n\t\t\t} catch (error) {}\r\n\t\t\te.dataTransfer.dropEffect =\r\n\t\t\t\teffect === \"move\" || effect === \"linkMove\" ? \"move\" : \"copy\";\r\n\t\t\tthis.$emit(VTransmitEvents.DragOver, e);\r\n\t\t},\r\n\t\thandleDragEnter(e: DragEvent): void {\r\n\t\t\tthis.dragging = true;\r\n\t\t\tthis.$emit(VTransmitEvents.DragEnter, e);\r\n\t\t},\r\n\t\thandleDragLeave(e: DragEvent): void {\r\n\t\t\tthis.dragging = false;\r\n\t\t\tthis.$emit(VTransmitEvents.DragLeave, e);\r\n\t\t},\r\n\t\thandleDragEnd(e: DragEvent): void {\r\n\t\t\tthis.dragging = false;\r\n\t\t\tthis.$emit(VTransmitEvents.DragEnd, e);\r\n\t\t},\r\n\t\thandleDrop(e: DragEvent): void {\r\n\t\t\tthis.dragging = false;\r\n\t\t\tif (!e.dataTransfer) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tlet files: File[];\r\n\t\t\tlet items: DataTransferItem[];\r\n\r\n\t\t\tthis.$emit(VTransmitEvents.Drop, e);\r\n\t\t\tthis.$emit(\r\n\t\t\t\tVTransmitEvents.AddedFiles,\r\n\t\t\t\t(files = Array.from(e.dataTransfer.files))\r\n\t\t\t);\r\n\r\n\t\t\tif (!e.dataTransfer.items) {\r\n\t\t\t\tthis.handleFiles(files);\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\titems = Array.from(e.dataTransfer.items);\r\n\t\t\tif (\r\n\t\t\t\t!items ||\r\n\t\t\t\t!items.length ||\r\n\t\t\t\t!(items[0].getAsFile || items[0].webkitGetAsEntry)\r\n\t\t\t) {\r\n\t\t\t\tthis.handleFiles(files);\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tthis.addFilesFromItems(items);\r\n\t\t},\r\n\t\thandlePaste(e: ClipboardEvent): void {\r\n\t\t\tlet cb = e.clipboardData || window.clipboardData;\r\n\t\t\tif (!e || !e.clipboardData || !e.clipboardData.items) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tthis.$emit(VTransmitEvents.Paste, e);\r\n\t\t\tconst items = Array.from(e.clipboardData.items);\r\n\t\t\tif (items.length) {\r\n\t\t\t\tthis.addFilesFromItems(items);\r\n\t\t\t}\r\n\t\t},\r\n\t\thandleFiles(files: File[]): VTransmitFile[] {\r\n\t\t\treturn files.map(this.addFile);\r\n\t\t},\r\n\t\taddFilesFromItems(items: DataTransferItem[]): void {\r\n\t\t\tlet entry: FileSystemEntry;\r\n\t\t\tfor (const item of items) {\r\n\t\t\t\t// Newer API on standards track\r\n\t\t\t\tif (item.getAsFile && item.kind == \"file\") {\r\n\t\t\t\t\tlet file = item.getAsFile();\r\n\t\t\t\t\tif (file) {\r\n\t\t\t\t\t\tthis.addFile(file);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// Vendor prefixed experimental API\r\n\t\t\t\tif (item.webkitGetAsEntry) {\r\n\t\t\t\t\tentry = item.webkitGetAsEntry();\r\n\r\n\t\t\t\t\tif (entry == null) {\r\n\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (webkitIsFile(entry)) {\r\n\t\t\t\t\t\tentry.file(this.addFile as any, console.error);\r\n\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (webkitIsDir(entry)) {\r\n\t\t\t\t\t\tthis.addFilesFromDirectory(entry, entry.name);\r\n\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\taddFilesFromDirectory(\r\n\t\t\tdirectory: WebKitDirectoryEntry,\r\n\t\t\tpath: string\r\n\t\t): void {\r\n\t\t\tdirectory.createReader().readEntries(\r\n\t\t\t\t<any>((entries: FileSystemEntry[]) => {\r\n\t\t\t\t\tfor (const entry of entries) {\r\n\t\t\t\t\t\tif (entry == null) {\r\n\t\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (webkitIsDir(entry)) {\r\n\t\t\t\t\t\t\tthis.addFilesFromDirectory(entry, `${path}/${entry.name}`);\r\n\t\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (webkitIsFile(entry)) {\r\n\t\t\t\t\t\t\tentry.file(\r\n\t\t\t\t\t\t\t\t<any>((file: File) => {\r\n\t\t\t\t\t\t\t\t\tif (\r\n\t\t\t\t\t\t\t\t\t\tthis.ignoreHiddenFiles &&\r\n\t\t\t\t\t\t\t\t\t\tfile.name.charAt(0) == \".\"\r\n\t\t\t\t\t\t\t\t\t) {\r\n\t\t\t\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t(file as any).fullPath = `${path}/${file.name}`;\r\n\t\t\t\t\t\t\t\t\tthis.addFile(file);\r\n\t\t\t\t\t\t\t\t}),\r\n\t\t\t\t\t\t\t\tconsole.error\r\n\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}),\r\n\t\t\t\tconsole.error\r\n\t\t\t);\r\n\t\t},\r\n\t},\r\n});\r\n</script>\r\n","import { VTransmitFile } from \"../classes/VTransmitFile\";\r\nimport { VTransmitUploadContext } from \"../classes/VTransmitUploadContext\";\r\nimport { DriverInterface, UploadResult } from \"../core/interfaces\";\r\nimport {\r\n\tVTransmitEvents,\r\n\tUploadStatuses,\r\n\tErrType,\r\n\tis_function,\r\n} from \"../core/utils\";\r\n\r\nexport type ParamName = string | ((file: VTransmitFile) => string);\r\nexport type StaticOrDynamic<T> = T | ((files: VTransmitFile[]) => T);\r\n\r\nfunction resolveStaticOrDynamic<T>(\r\n\tx: StaticOrDynamic<T>,\r\n\tfiles: VTransmitFile[]\r\n): T {\r\n\tif (is_function(x)) {\r\n\t\treturn x(files);\r\n\t}\r\n\r\n\treturn x;\r\n}\r\n\r\nexport enum ParamNameStyle {\r\n\tEmpty,\r\n\tIndexed,\r\n\tBrackets,\r\n}\r\n\r\n/**\r\n * Responsibilities:\r\n * - send and manage upload via transport\r\n * - on progress: emit progress stats\r\n * - on error: emit to vue-transmit & update file status\r\n * - on timeout: emit to vue-transmit & update file status\r\n * - on error: emit to vue-transmit & update file status\r\n * - on success: emit to vue-transmit & update file status\r\n * - once complete: emit to vue-transmit & update file status\r\n */\r\nexport type XHRDriverOptions<T = any> = {\r\n\t/**\r\n\t * A string representing the URL to send the request to\r\n\t * or a function called with an array of files for the upload\r\n\t * that returns a string url.\r\n\t */\r\n\turl: StaticOrDynamic<string>;\r\n\t/**\r\n\t * The HTTP method to use, such as \"GET\", \"POST\", \"PUT\", \"DELETE\", etc.\r\n\t * Ignored for non-HTTP(S) URLs.\r\n\t *\r\n\t * ```\r\n\t * // default => \"post\"\r\n\t * ```\r\n\t */\r\n\tmethod?: StaticOrDynamic<string>;\r\n\t/**\r\n\t * The XMLHttpRequest.withCredentials property is a Boolean that indicates\r\n\t * whether or not cross-site Access-Control requests should be made using\r\n\t * credentials such as cookies, authorization headers or TLS client\r\n\t * certificates. Setting withCredentials has no effect on same-site requests.\r\n\t */\r\n\twithCredentials?: StaticOrDynamic<boolean>;\r\n\t/**\r\n\t * The XMLHttpRequest.timeout property is an unsigned long representing the\r\n\t * number of milliseconds a request can take before automatically being\r\n\t * terminated. The default value is 0, which means there is no timeout.\r\n\t * Timeout shouldn't be used for synchronous XMLHttpRequests requests used in\r\n\t * a document environment or it will throw an InvalidAccessError exception.\r\n\t * When a timeout happens, a timeout event is fired.\r\n\t */\r\n\ttimeout?: StaticOrDynamic<number>;\r\n\t/**\r\n\t * The name of the file param that gets transferred.\r\n\t */\r\n\tparamName?: ParamName;\r\n\t/**\r\n\t * The param name syntax for multiple uploads.\r\n\t *\r\n\t * **Options:**\r\n\t * - `0 (Empty)` _(Default)_ Adds nothing to the paramName: `file`\r\n\t * - `1 (Indexed)` Adds the array index of the file: `file[0]`\r\n\t * - `2 (Brackets)` Adds the array-like brackets without index: `file[]`\r\n\t */\r\n\tmultipleParamNameStyle?: ParamNameStyle;\r\n\t/**\r\n\t * An object of additional parameters to transfer to the server.\r\n\t * This is the same as adding hidden input fields in the form element.\r\n\t */\r\n\tparams?: StaticOrDynamic<Dictionary<string>>;\r\n\theaders?: StaticOrDynamic<Dictionary<string>>;\r\n\t/**\r\n\t * The XMLHttpRequest.responseType property is an enumerated value that\r\n\t * returns the type of response. It also lets the author change the response\r\n\t * type. If an empty string is set as the value of responseType, the default\r\n\t * value text will be used.\r\n\t *\r\n\t * Setting the value of responseType to \"document\" is ignored if done in a\r\n\t * Worker environment. When setting responseType to a particular value,\r\n\t * the author should make sure that the server is actually sending a response\r\n\t * compatible to that format. If the server returns data that is not\r\n\t * compatible to the responseType that was set, the value of response will be\r\n\t * null. Also, setting responseType for synchronous requests will throw an\r\n\t * InvalidAccessError exception.\r\n\t */\r\n\tresponseType?: StaticOrDynamic<XMLHttpRequestResponseType>;\r\n\t/**\r\n\t * responseParseFunc is a function that given an XMLHttpRequest\r\n\t * returns a response object. Allows for custom response parsing.\r\n\t */\r\n\tresponseParseFunc?: (xhr: XMLHttpRequest) => T;\r\n\terrUploadError?: (xhr: XMLHttpRequest) => string;\r\n\terrUploadTimeout?: (xhr: XMLHttpRequest) => string;\r\n\trenameFile?: (name: string) => string;\r\n};\r\n\r\nexport type XHRUploadGroup = {\r\n\tid: number;\r\n\tfiles: VTransmitFile[];\r\n\txhr: XMLHttpRequest;\r\n};\r\n\r\nlet group_id = 0;\r\n\r\nexport class XHRDriver<T = any> implements DriverInterface {\r\n\tpublic context: VTransmitUploadContext;\r\n\tpublic url: StaticOrDynamic<string>;\r\n\tpublic method: StaticOrDynamic<string>;\r\n\tpublic withCredentials: StaticOrDynamic<boolean>;\r\n\tpublic timeout: StaticOrDynamic<number>;\r\n\tpublic paramName: ParamName;\r\n\tpublic multipleParamNameStyle: ParamNameStyle;\r\n\tpublic params: StaticOrDynamic<Dictionary<string>>;\r\n\tpublic headers: StaticOrDynamic<Dictionary<string>>;\r\n\tpublic responseType: StaticOrDynamic<XMLHttpRequestResponseType>;\r\n\tpublic errUploadError: (xhr: XMLHttpRequest) => string;\r\n\tpublic errUploadTimeout: (xhr: XMLHttpRequest) => string;\r\n\tpublic renameFile: (name: string) => string;\r\n\tpublic responseParseFunc?: (xhr: XMLHttpRequest) => T;\r\n\r\n\tprivate uploadGroups: { [key: number]: XHRUploadGroup } = Object.create(\r\n\t\tnull\r\n\t);\r\n\r\n\tconstructor(context: VTransmitUploadContext, options: XHRDriverOptions<T>) {\r\n\t\tlet {\r\n\t\t\turl,\r\n\t\t\tmethod = \"post\",\r\n\t\t\twithCredentials = false,\r\n\t\t\ttimeout = 0,\r\n\t\t\tparamName = \"file\",\r\n\t\t\tmultipleParamNameStyle = ParamNameStyle.Empty,\r\n\t\t\tparams = Object.create(null),\r\n\t\t\theaders = {\r\n\t\t\t\tAccept: \"application/json\",\r\n\t\t\t\t\"Cache-Control\": \"no-cache\",\r\n\t\t\t\t\"X-Requested-With\": \"XMLHttpRequest\",\r\n\t\t\t},\r\n\t\t\tresponseType = \"json\",\r\n\t\t\tresponseParseFunc,\r\n\t\t\terrUploadError = (xhr: XMLHttpRequest) =>\r\n\t\t\t\t`Error during upload: ${xhr.statusText} [${xhr.status}]`,\r\n\t\t\terrUploadTimeout = (_xhr: XMLHttpRequest) =>\r\n\t\t\t\t`Error during upload: the server timed out.`,\r\n\t\t\trenameFile = (name: string) => name,\r\n\t\t} = options;\r\n\r\n\t\tif (!url) {\r\n\t\t\tthrow new TypeError(\r\n\t\t\t\t`${\r\n\t\t\t\t\tthis.constructor.name\r\n\t\t\t\t} requires a 'url' parameter. Supply a string or a function returning a string.`\r\n\t\t\t);\r\n\t\t}\r\n\r\n\t\tthis.context = context;\r\n\t\tthis.url = url;\r\n\t\tthis.method = method;\r\n\t\tthis.withCredentials = withCredentials;\r\n\t\tthis.timeout = timeout;\r\n\t\tthis.paramName = paramName;\r\n\t\tthis.multipleParamNameStyle = multipleParamNameStyle;\r\n\t\tthis.params = params;\r\n\t\tthis.headers = headers;\r\n\t\tthis.responseType = responseType;\r\n\t\tthis.responseParseFunc = responseParseFunc;\r\n\t\tthis.errUploadError = errUploadError;\r\n\t\tthis.errUploadTimeout = errUploadTimeout;\r\n\t\tthis.renameFile = renameFile;\r\n\t}\r\n\r\n\tuploadFiles(files: VTransmitFile[]): Promise<UploadResult<T>> {\r\n\t\treturn new Promise(resolve => {\r\n\t\t\tif (!this.url) {\r\n\t\t\t\treturn resolve({\r\n\t\t\t\t\tok: false,\r\n\t\t\t\t\terr: {\r\n\t\t\t\t\t\ttype: ErrType.Any,\r\n\t\t\t\t\t\tmessage: `Missing upload URL.`,\r\n\t\t\t\t\t\tdata: this.url,\r\n\t\t\t\t\t},\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\tconst xhr = new XMLHttpRequest();\r\n\t\t\tconst updateProgress = this.handleUploadProgress(files);\r\n\t\t\tconst id = group_id++;\r\n\t\t\tconst params = resolveStaticOrDynamic(this.params, files);\r\n\t\t\tconst headers = resolveStaticOrDynamic(this.headers, files);\r\n\r\n\t\t\tthis.uploadGroups[id] = { id, xhr, files };\r\n\r\n\t\t\tfor (const file of files) {\r\n\t\t\t\tfile.driverData.groupID = id;\r\n\t\t\t\tfile.startProgress();\r\n\t\t\t}\r\n\r\n\t\t\txhr.open(\r\n\t\t\t\tresolveStaticOrDynamic(this.method, files),\r\n\t\t\t\tresolveStaticOrDynamic(this.url, files),\r\n\t\t\t\ttrue\r\n\t\t\t);\r\n\t\t\t// Setting the timeout after open because of IE11 issue:\r\n\t\t\t// @link https://gitlab.com/meno/dropzone/issues/8\r\n\t\t\txhr.timeout = resolveStaticOrDynamic(this.timeout, files);\r\n\t\t\txhr.withCredentials = resolveStaticOrDynamic(\r\n\t\t\t\tthis.withCredentials,\r\n\t\t\t\tfiles\r\n\t\t\t);\r\n\t\t\txhr.responseType = resolveStaticOrDynamic(this.responseType, files);\r\n\r\n\t\t\txhr.addEventListener(\"error\", () => {\r\n\t\t\t\tthis.rmGroup(id);\r\n\t\t\t\tresolve({\r\n\t\t\t\t\tok: false,\r\n\t\t\t\t\terr: {\r\n\t\t\t\t\t\ttype: ErrType.Any,\r\n\t\t\t\t\t\tmessage: this.errUploadError(xhr),\r\n\t\t\t\t\t\tdata: xhr,\r\n\t\t\t\t\t},\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t\txhr.upload.addEventListener(\"progress\", updateProgress);\r\n\t\t\txhr.addEventListener(\"timeout\", () => {\r\n\t\t\t\tthis.rmGroup(id);\r\n\t\t\t\tresolve({\r\n\t\t\t\t\tok: false,\r\n\t\t\t\t\terr: {\r\n\t\t\t\t\t\ttype: ErrType.Timeout,\r\n\t\t\t\t\t\tmessage: this.errUploadTimeout(xhr),\r\n\t\t\t\t\t\tdata: xhr,\r\n\t\t\t\t\t},\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t\txhr.addEventListener(\"load\", () => {\r\n\t\t\t\tif (\r\n\t\t\t\t\tfiles[0].status === UploadStatuses.Canceled ||\r\n\t\t\t\t\txhr.readyState !== XMLHttpRequest.DONE\r\n\t\t\t\t) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// The XHR is complete, so remove the group\r\n\t\t\t\tthis.rmGroup(id);\r\n\r\n\t\t\t\tlet response: T;\r\n\t\t\t\tif (this.responseParseFunc) {\r\n\t\t\t\t\tresponse = this.responseParseFunc(xhr);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tresponse = xhr.response;\r\n\r\n\t\t\t\t\tif (!xhr.responseType) {\r\n\t\t\t\t\t\tlet contentType = xhr.getResponseHeader(\"content-type\");\r\n\t\t\t\t\t\tif (\r\n\t\t\t\t\t\t\tcontentType &&\r\n\t\t\t\t\t\t\tcontentType.indexOf(\"application/json\") > -1\r\n\t\t\t\t\t\t) {\r\n\t\t\t\t\t\t\ttry {\r\n\t\t\t\t\t\t\t\tresponse = JSON.parse(xhr.responseText);\r\n\t\t\t\t\t\t\t} catch (err) {\r\n\t\t\t\t\t\t\t\treturn resolve({\r\n\t\t\t\t\t\t\t\t\tok: false,\r\n\t\t\t\t\t\t\t\t\terr: {\r\n\t\t\t\t\t\t\t\t\t\tmessage: \"Invalid JSON response from server.\",\r\n\t\t\t\t\t\t\t\t\t\ttype: ErrType.Any,\r\n\t\t\t\t\t\t\t\t\t\tdata: err,\r\n\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// Called on load (complete) to complete progress tracking logic.\r\n\t\t\t\tupdateProgress();\r\n\t\t\t\tif (xhr.status < 200 || xhr.status >= 300) {\r\n\t\t\t\t\treturn resolve({\r\n\t\t\t\t\t\tok: false,\r\n\t\t\t\t\t\terr: {\r\n\t\t\t\t\t\t\ttype: ErrType.Any,\r\n\t\t\t\t\t\t\tmessage: this.errUploadError(xhr),\r\n\t\t\t\t\t\t\tdata: xhr,\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn resolve({\r\n\t\t\t\t\tok: true,\r\n\t\t\t\t\tdata: response,\r\n\t\t\t\t});\r\n\t\t\t});\r\n\r\n\t\t\tfor (const headerName of Object.keys(headers)) {\r\n\t\t\t\tif (headers[headerName]) {\r\n\t\t\t\t\txhr.setRequestHeader(headerName, headers[headerName]);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tconst formData = new FormData();\r\n\t\t\tfor (const key of Object.keys(params)) {\r\n\t\t\t\tformData.append(key, params[key]);\r\n\t\t\t}\r\n\r\n\t\t\tfor (const file of files) {\r\n\t\t\t\tthis.context.emit(VTransmitEvents.Sending, file, xhr, formData);\r\n\t\t\t}\r\n\r\n\t\t\tif (this.context.props.uploadMultiple) {\r\n\t\t\t\tthis.context.emit(\r\n\t\t\t\t\tVTransmitEvents.SendingMultiple,\r\n\t\t\t\t\tfiles,\r\n\t\t\t\t\txhr,\r\n\t\t\t\t\tformData\r\n\t\t\t\t);\r\n\t\t\t}\r\n\r\n\t\t\tfor (let i = 0, len = files.length; i < len; i++) {\r\n\t\t\t\tformData.append(\r\n\t\t\t\t\tthis.getParamName(files[i], i),\r\n\t\t\t\t\tfiles[i].nativeFile,\r\n\t\t\t\t\tthis.renameFile(files[i].name)\r\n\t\t\t\t);\r\n\t\t\t}\r\n\r\n\t\t\txhr.send(formData);\r\n\t\t});\r\n\t}\r\n\r\n\thandleUploadProgress(files: VTransmitFile[]): (e?: ProgressEvent) => void {\r\n\t\tconst vm = this.context.vtransmit;\r\n\r\n\t\treturn function onProgressFn(e?: ProgressEvent): void {\r\n\t\t\tif (!e) {\r\n\t\t\t\tlet allFilesFinished = true;\r\n\r\n\t\t\t\tfor (const file of files) {\r\n\t\t\t\t\tif (\r\n\t\t\t\t\t\tfile.upload.progress !== 100 ||\r\n\t\t\t\t\t\tfile.upload.bytesSent !== file.upload.total\r\n\t\t\t\t\t) {\r\n\t\t\t\t\t\tallFilesFinished = false;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tfile.upload.progress = 100;\r\n\t\t\t\t\tfile.upload.bytesSent = file.upload.total;\r\n\t\t\t\t\tfile.endProgress();\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (allFilesFinished) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tfor (const file of files) {\r\n\t\t\t\tif (e) {\r\n\t\t\t\t\tfile.handleProgress(e);\r\n\t\t\t\t}\r\n\t\t\t\tvm.$emit(\r\n\t\t\t\t\tVTransmitEvents.UploadProgress,\r\n\t\t\t\t\tfile,\r\n\t\t\t\t\tfile.upload.progress,\r\n\t\t\t\t\tfile.upload.bytesSent\r\n\t\t\t\t);\r\n\t\t\t}\r\n\t\t};\r\n\t}\r\n\r\n\tgetParamName(file: VTransmitFile, index: string | number): string {\r\n\t\tlet paramName: string;\r\n\t\tif (is_function(this.paramName)) {\r\n\t\t\tparamName = this.paramName(file);\r\n\t\t} else {\r\n\t\t\tparamName = this.paramName;\r\n\t\t}\r\n\r\n\t\tif (!this.context.props.uploadMultiple) {\r\n\t\t\treturn paramName;\r\n\t\t}\r\n\r\n\t\tswitch (this.multipleParamNameStyle) {\r\n\t\t\tcase ParamNameStyle.Indexed:\r\n\t\t\t\tparamName += `[${index}]`;\r\n\t\t\t\tbreak;\r\n\t\t\tcase ParamNameStyle.Brackets:\r\n\t\t\t\tparamName += `[]`;\r\n\t\t\t\tbreak;\r\n\t\t\tcase ParamNameStyle.Empty:\r\n\t\t\tdefault:\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\r\n\t\treturn paramName;\r\n\t}\r\n\r\n\tcancelUpload(file: VTransmitFile): VTransmitFile[] {\r\n\t\tlet group = this.uploadGroups[file.driverData.groupID];\r\n\t\tif (!group) {\r\n\t\t\treturn [];\r\n\t\t}\r\n\r\n\t\tgroup.xhr.abort();\r\n\t\tthis.rmGroup(file.driverData.groupID);\r\n\r\n\t\treturn [...group.files];\r\n\t}\r\n\r\n\trmGroup(id: number) {\r\n\t\tdelete this.uploadGroups[id];\r\n\t}\r\n}\r\n","import VueTransmit from \"./components/VueTransmit.vue\";\r\nimport { PluginObject } from \"vue\";\r\nimport {\r\n\tXHRDriver,\r\n\tParamNameStyle,\r\n\tXHRDriverOptions,\r\n\tXHRUploadGroup,\r\n} from \"./upload-drivers/xhr\";\r\nimport { AxiosDriver, AxiosDriverOptions } from \"./upload-drivers/axios\";\r\n\r\nimport {\r\n\tDriverConstructor,\r\n\tDriverInterface,\r\n\tUploadErr,\r\n\tUploadResult,\r\n} from \"./core/interfaces\";\r\nimport {\r\n\tDimensions,\r\n\tDrawImageArgs,\r\n\tErrType,\r\n\tUploadStatuses,\r\n\tVTransmitEvents,\r\n} from \"./core/utils\";\r\n\r\nconst VueTransmitPlugin: PluginObject<undefined> = {\r\n\tinstall(Vue) {\r\n\t\tVue.component(\"VueTransmit\", VueTransmit);\r\n\t},\r\n\tname: \"vue-transmit\",\r\n};\r\n\r\nexport {\r\n\tVueTransmitPlugin,\r\n\tVueTransmit,\r\n\tXHRDriver,\r\n\tParamNameStyle,\r\n\tXHRDriverOptions,\r\n\tXHRUploadGroup,\r\n\tAxiosDriver,\r\n\tAxiosDriverOptions,\r\n\tDriverConstructor,\r\n\tDriverInterface,\r\n\tUploadErr,\r\n\tUploadResult,\r\n\tDimensions,\r\n\tDrawImageArgs,\r\n\tErrType,\r\n\tUploadStatuses,\r\n\tVTransmitEvents,\r\n};\r\n\r\nexport default VueTransmitPlugin;\r\n"],"names":["UploadStatuses","ErrType","VTransmitEvents","ParamNameStyle","group_id","resolveStaticOrDynamic","Vue"],"mappings":"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"}